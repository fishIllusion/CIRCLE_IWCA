{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, vShow as _vShow, withDirectives as _withDirectives, resolveComponent as _resolveComponent, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '../assets/init-icon-pics/arrow-down-s-line.png';\nconst _withScopeId = n => (_pushScopeId(\"data-v-1bc2f18a\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"myPrivacy\",\n  id: \"testPC\"\n};\nconst _hoisted_2 = {\n  class: \"left\"\n};\nconst _hoisted_3 = {\n  class: \"serverName\"\n};\nconst _hoisted_4 = {\n  class: \"wrap\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_6 = {\n  class: \"groupName\"\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_8 = {\n  class: \"groups\"\n};\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = {\n  class: \"split\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"container_single\"\n};\nconst _hoisted_12 = {\n  class: \"room\"\n};\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"#AZUR LANE\", -1 /* HOISTED */));\nconst _hoisted_14 = [_hoisted_13];\nconst _hoisted_15 = {\n  class: \"right\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_view = _resolveComponent(\"router-view\");\n  const _component_inviteDialog = _resolveComponent(\"inviteDialog\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"span\", null, _toDisplayString(_ctx.middleData.serverName), 1 /* TEXT */), _hoisted_5])]), _createCommentVNode(\" 设置聊天分类 \"), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.serverDetails.servers[$setup.sid].catagory, (item, Index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"roomGroup\",\n      key: Index\n    }, [_createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _createElementVNode(\"span\", null, _toDisplayString(item.cname), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.hideGroups, (element, index) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        class: \"container\",\n        key: index\n      }, [_createElementVNode(\"div\", {\n        class: \"room\",\n        onClick: $event => _ctx.goMes(111, Index, index),\n        onContextmenu: _cache[1] || (_cache[1] = _withModifiers((...args) => $setup.openMenu && $setup.openMenu(...args), [\"prevent\"]))\n      }, [_createElementVNode(\"span\", null, _toDisplayString(element.gname), 1 /* TEXT */), _createElementVNode(\"i\", {\n        class: \"iconfont icon-yaoqing\",\n        onClick: _cache[0] || (_cache[0] = (...args) => $setup.openAction && $setup.openAction(...args))\n      })], 40 /* PROPS, HYDRATE_EVENTS */, _hoisted_9)]);\n    }), 128 /* KEYED_FRAGMENT */)), _withDirectives(_createElementVNode(\"div\", _hoisted_10, null, 512 /* NEED_PATCH */), [[_vShow, _ctx.serverDetails.servers[$setup.sid].directGroups.length != 0]])])]);\n  }), 128 /* KEYED_FRAGMENT */)), _createCommentVNode(\" 直接聊天室 \"), _ctx.serverDetails.servers[$setup.sid].directGroups.length != 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.serverDetails.servers[$setup.sid].directGroups, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", _hoisted_12, [..._hoisted_14]);\n  }), 256 /* UNKEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_15, [_createVNode(_component_router_view)]), _createVNode(_component_inviteDialog)]);\n}","map":{"version":3,"names":["_imports_0","class","id","_createElementVNode","src","alt","_hoisted_13","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","_ctx","middleData","serverName","_hoisted_5","_createCommentVNode","_Fragment","_renderList","serverDetails","servers","$setup","sid","catagory","item","Index","key","_hoisted_6","_hoisted_7","cname","_hoisted_8","hideGroups","element","index","onClick","$event","goMes","onContextmenu","_cache","_withModifiers","args","openMenu","gname","openAction","_hoisted_10","directGroups","length","_hoisted_11","_hoisted_12","_hoisted_14","_hoisted_15","_createVNode","_component_router_view","_component_inviteDialog"],"sources":["/Users/a1807292313/GIT/CIRCLE_IWCA/src/pages/serverAndRoom.vue"],"sourcesContent":["<template>\n     <div class=\"myPrivacy\" id=\"testPC\">\n          <div class=\"left\">\n               <div class=\"serverName\">\n                    <div class=\"wrap\">\n                         <span>{{ middleData.serverName }}</span>\n                         <img src=\"../assets/init-icon-pics/arrow-down-s-line.png\" alt=\"\">\n                    </div>\n               </div>\n               <!-- 设置聊天分类 -->\n               <div class=\"roomGroup\" v-for=\"(item, Index) in serverDetails.servers[sid].catagory\" :key=\"Index\">\n                    <div class=\"groupName\">\n                         <img src=\"../assets/init-icon-pics/arrow-down-s-line.png\" alt=\"\">\n                         <span>{{ item.cname }}</span>\n                    </div>\n                    <div class=\"groups\">\n                         <div class=\"container\" v-for=\"(element, index) in item.hideGroups\" :key=\"index\">\n                              <div class=\"room\" @click=\"goMes(111, Index, index)\" @contextmenu.prevent=\"openMenu\">\n                                   <span>{{ element.gname }}</span>\n                                   <i class=\"iconfont icon-yaoqing\" @click=\"openAction\"></i>\n                              </div>\n                         </div>\n                         <div class=\"split\" v-show=\"serverDetails.servers[sid].directGroups.length != 0\"></div>\n                    </div>\n               </div>\n               <!-- 直接聊天室 -->\n               <div class=\"container_single\" v-if=\"serverDetails.servers[sid].directGroups.length != 0\">\n                    <div class=\"room\" v-for=\"(item, index) in serverDetails.servers[sid].directGroups\">\n                         <span>#AZUR LANE</span>\n                    </div>\n               </div>\n          </div>\n          <div class=\"right\">\n               <router-view></router-view>\n          </div>\n          <inviteDialog />\n     </div>\n</template>\n\n<script>\nimport { useRouter } from 'vue-router'\nimport store from '@/store';\nimport { mapState } from 'vuex';\nimport { useState } from '../hooks/useState'\nimport { openContextMenu } from '@/utils/openMenu';\nimport { onMounted, reactive } from 'vue';\nimport inviteDialog from '../pages/invite.vue'\nimport { openInvite } from '../utils/openDialog'\nimport $bus from '@/utils/event_bus'\nreactive\nexport default {\n     components: {\n          inviteDialog\n     },\n     setup() {\n          const { isOpen, openMenu, closeMenu } = openContextMenu()\n          const router = useRouter()\n          let useMap = useState(['serverDetails', 'middleData'], mapState)//获取store中存储的数据\n          const sid = router.currentRoute.value.params.sid //获取服务器的sid\n          const { openAction } = openInvite('invite')\n          //定义该组件的方法\n          const methods = {\n               //获取当前服务器的信息\n               getServerInfo(sid) {\n                    let num = 0\n                    for (let i in store.state.serverDetails.servers[sid]) {\n                         num++\n                    }\n                    if (num == 2) {\n                         // console.log(store.state.serverDetails.servers[sid]);\n                         store.dispatch('getServerInfo', sid)\n                    }\n               },\n               goMes(gid, catagoryIndex, hidegroupIndex) {\n                    store.commit('GETINDEXES', { catagoryIndex, hidegroupIndex })\n                    localStorage.GlobalBaseInfo = JSON.stringify({ catagoryIndex, hidegroupIndex })\n                    \n                    router.push({\n                         path: `/channels/server/${sid}/${gid}`,\n                    })\n               },\n               rightClick(event) {\n                    event.preventDefault();\n                    let x = event.clientX;\n                    let y = event.clientY;\n                    console.log(x, y);\n               }\n          }\n          methods.getServerInfo(sid)\n          onMounted(() => {\n               //当点击非gr_container的元素时，关闭黑窗口\n               window.onclick = (e) => {\n                    if (e.srcElement.className != 'gr_container' && e.srcElement.className.indexOf('justOpen') == -1) {\n                         closeMenu()    \n                    }\n               }\n               window.oncontextmenu = (e) => {\n                    if(e.srcElement.className == 'room') {\n                         return \n                    }\n                    else{\n                         e.preventDefault()\n                         closeMenu()\n                    }\n               }\n               $bus.on('showDialog', () => {\n                    openAction()\n                    closeMenu()\n               })\n          })\n          // const goMes = (gid) => {\n          //      // let pid = uid < hostid?(uid + hostid):(hostid + uid)\n          //      // console.log(router.currentRoute.value.params);\n          //      router.push(`/channels/server/${sid}/${gid}`)\n          // }\n          return {\n               ...useMap, ...methods, sid, store, openContextMenu, isOpen, openMenu, closeMenu, openAction\n          }\n\n     }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.myPrivacy {\n     width: calc(100vw - 70px);\n     height: 100vh;\n     display: flex;\n\n     // position: relative;\n     .left {\n          width: 240px;\n          height: calc(100vh - 40px);\n          background-color: rgb(43, 45, 49);\n\n          .serverName {\n               width: 100%;\n               height: 48px;\n               border-bottom: 1px solid rgb(29, 29, 29);\n               display: flex;\n               justify-content: center;\n               align-items: center;\n               margin-bottom: 10px;\n\n               .wrap {\n                    width: 85%;\n                    height: 95%;\n                    // border: 1px solid #fff;\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    color: #fff;\n                    font-family: var(--nomal-font_family);\n               }\n          }\n\n          .roomGroup {\n               width: 100%;\n\n               .groupName {\n                    transition: .2s;\n                    width: 90%;\n                    height: 24px;\n                    color: rgb(148, 156, 164);\n                    display: flex;\n                    align-items: center;\n                    cursor: pointer;\n\n                    &:hover {\n                         color: #fff;\n                    }\n\n                    img {\n                         width: 24px;\n                         padding-left: 5px;\n                         // transform: rotateZ(270deg);\n                    }\n\n                    span {\n                         height: 24px;\n                         line-height: 24px;\n                         font-family: Montserrat-BlackItalic;\n                    }\n               }\n\n               .groups {\n\n                    margin-top: 5px;\n                    width: 100%;\n                    display: flex;\n                    flex-direction: column;\n                    align-items: center;\n                    justify-content: center;\n\n                    .container {\n                         width: 90%;\n                         height: 35px;\n                         display: flex;\n                         justify-content: center;\n                         align-items: center;\n                         border-radius: 5px;\n                         transition: .2s;\n                         cursor: pointer;\n                         &:hover {\n                              background-color: rgb(72, 73, 74);\n\n                              .room {\n                                   color: #fff;\n                              }\n                         }\n\n                         .room {\n                              width: 90%;\n                              font-family: var(--nomal-font_family);\n                              color: rgb(149, 150, 155);\n                              display: flex;\n                              justify-content: space-between;\n                              align-items: center;\n                              i {\n                                   transition: .3s;\n                                   &:hover {\n                                        font-size: 18px;\n                                   }\n                              }\n                         }\n                    }\n\n\n                    .split {\n                         width: 90%;\n                         height: 1px;\n                         background-color: rgb(100, 102, 105);\n                         margin: 10px 0;\n                    }\n               }\n          }\n\n          .container_single {\n               margin: 0 auto;\n               width: 80%;\n               height: 30px;\n               display: flex;\n               justify-content: center;\n               align-items: center;\n               border-radius: 8px;\n               transition: .4s;\n               cursor: pointer;\n\n               &:hover {\n                    background-color: rgb(53, 55, 61);\n               }\n\n               background-color: rgb(53, 55, 61);\n\n               .room {\n                    width: 90%;\n                    font-family: var(--nomal-font_family);\n                    color: #fff;\n               }\n          }\n     }\n\n     .right {\n          width: calc(100vw - 70px - 240px);\n          height: 100vh;\n          background-color: rgb(49, 51, 56);\n          // z-index: 1;\n\n          // .roomNavs {\n          //      width: 100%;\n          //      height: 48px;\n          //      border-bottom: 1px solid rgb(29, 29, 29);\n\n          //      .middle {\n          //           height: 48px;\n          //           margin: 0 auto;\n          //           width: 95%;\n          //           display: flex;\n          //           justify-content: space-between;\n          //           align-items: center;\n\n          //           .one {\n          //                height: 40px;\n          //                // border: 1px solid #fff;\n          //           }\n\n          //           .roomName {\n          //                min-width: 300px;\n\n          //                span {\n          //                     height: 40px;\n          //                     line-height: 40px;\n          //                     color: #fff;\n          //                     font-family: var(--nomal-font_family);\n          //                     font-size: 14px;\n          //                }\n          //           }\n\n          //           .taps {\n          //                min-width: 50%;\n          //           }\n          //      }\n\n          // }\n\n          // .one {\n          //      margin: 0 auto;\n          //      width: 95%;\n          // }\n\n          // .chatArea {\n          //      height: calc(96% - 48px - 66px - 18px);\n          //      // min-height: 50%;\n          //      // border: 1px solid #fff;\n          //      overflow: scroll;\n\n          //      .welcome {\n          //           display: flex;\n          //           flex-direction: column;\n\n          //           img {\n          //                margin: 15px 0;\n          //                width: 65px;\n          //                height: 65px;\n          //                border-radius: 50%;\n          //           }\n\n          //           span {\n          //                color: #fff;\n          //                font-family: var(--nomal-font_family);\n          //           }\n\n          //           .nickName {\n          //                font-size: 30px;\n          //           }\n\n          //           .userName {\n          //                font-size: 1.4rem;\n          //                margin: 10px 0;\n          //           }\n\n          //           p {\n          //                color: #b4b4b4;\n          //                font-weight: 500;\n          //           }\n          //      }\n\n          //      .split {\n          //           width: 100%;\n          //           height: 1px;\n          //           background-color: #fff;\n          //           margin: 20px 0;\n          //      }\n\n          //      .chatList {\n          //           width: 100%;\n          //           // height: 100%;\n          //           min-height: 0;\n\n          //           .oneMes {\n          //                display: flex;\n          //                margin-top: 20px;\n\n          //                .leftPart {\n          //                     height: inherit;\n\n          //                     img {\n          //                          width: 40px;\n          //                          height: 40px;\n          //                          object-fit: cover;\n          //                          border-radius: 50%;\n\n          //                     }\n          //                }\n\n          //                .rightPart {\n          //                     padding-left: 15px;\n          //                     height: 80%;\n          //                     display: flex;\n          //                     flex-direction: column;\n          //                     justify-content: center;\n\n          //                     .basicMes {\n          //                          min-height: 20px;\n\n          //                          .nickName {\n          //                               color: rgb(47, 201, 112);\n          //                               font-family: var(--nomal-font_family);\n          //                               margin-right: 10px;\n          //                          }\n\n          //                          .sendTime {\n          //                               color: #6f6e6e;\n          //                               font-size: 12px;\n          //                          }\n          //                     }\n\n          //                     .sendContent {\n          //                          color: #fff;\n          //                     }\n          //                }\n          //           }\n          //      }\n          // }\n\n          // .sendMes {\n          //      min-height: 44px;\n          //      border-radius: 8px;\n          //      box-shadow: 1px 1px 5px rgb(45, 45, 45);\n          //      background-color: rgb(56, 58, 64);\n          //      position: absolute;\n          //      bottom: 6%;\n          //      left: 50%;\n          //      transform: translateX(-50%);\n\n          //      .wrap {\n          //           min-height: 44px;\n          //           // border: 1px solid #fff;\n          //           width: 100%;\n          //           position: relative;\n\n          //           .outFile {\n          //                position: absolute;\n          //                top: 50%;\n          //                left: 40px;\n          //                transform: translate(-50%, -50%);\n          //                width: 25px;\n          //                height: 25px;\n          //                border-radius: 50%;\n          //                background-color: #a2a0a0;\n          //                display: flex;\n          //                justify-content: center;\n          //                align-items: center;\n\n          //                i {\n          //                     font-size: 20px;\n          //                     font-weight: bolder;\n          //                     color: #2c2c2c;\n          //                }\n          //           }\n          //      }\n\n          //      .input {\n          //           // border: 1px solid #fff;\n          //           width: 60%;\n          //           min-height: 44px;\n          //           position: absolute;\n          //           left: 70px;\n          //           bottom: 50%;\n          //           transform: translateY(50%);\n          //           color: #fff;\n          //           outline: none;\n          //           line-height: 44px;\n          //           max-height: 40vh;\n          //           overflow: scroll;\n\n          //           &:empty:before {\n          //                content: attr(placeholder);\n          //                color: #ccc;\n          //                font-family: var(--nomal-font_family);\n          //           }\n          //      }\n          // }\n     }\n}</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}