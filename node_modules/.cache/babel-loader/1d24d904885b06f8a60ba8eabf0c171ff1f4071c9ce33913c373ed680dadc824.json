{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, vShow as _vShow, normalizeClass as _normalizeClass, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '../assets//logo/logo.png';\nimport _imports_1 from '../assets/init-icon-pics/duigou1.png';\nimport _imports_2 from '../assets/init-icon-pics/cuowu.png';\nimport _imports_3 from '../assets/init-icon-pics/account.png';\nimport _imports_4 from '../assets/init-icon-pics/lock.png';\nconst _withScopeId = n => (_pushScopeId(\"data-v-4da1a55c\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"main_container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"logo\"\n}, null, -1));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Circle\", -1));\nconst _hoisted_4 = [_hoisted_2, _hoisted_3];\nconst _hoisted_5 = {\n  class: \"loginPanel\",\n  id: \"panel\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"title\"\n}, \"Sign in\", -1));\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"tip\"\n}, \"Welcome To Circle and Come To Start Your Jouney\", -1));\nconst _hoisted_8 = {\n  class: \"pass litTip\",\n  src: _imports_1,\n  alt: \"pass\"\n};\nconst _hoisted_9 = {\n  class: \"error litTip\",\n  src: _imports_2,\n  alt: \"error\"\n};\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_3,\n  alt: \"account\"\n}, null, -1));\nconst _hoisted_11 = {\n  class: \"statu\"\n};\nconst _hoisted_12 = {\n  class: \"statu\"\n};\nconst _hoisted_13 = {\n  class: \"pass litTip\",\n  src: _imports_1,\n  alt: \"pass\"\n};\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_4,\n  alt: \"pwd\"\n}, null, -1));\nconst _hoisted_15 = {\n  class: \"statu\"\n};\nconst _hoisted_16 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"reAndFo\\\" data-v-4da1a55c><div class=\\\"remember\\\" data-v-4da1a55c><input type=\\\"checkbox\\\" data-v-4da1a55c><div class=\\\"rememberMe\\\" data-v-4da1a55c>Remember me</div></div><div class=\\\"forgot\\\" data-v-4da1a55c>Forget password?</div></div>\", 1);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", {\n    class: \"logo\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.goHomePage && $setup.goHomePage(...args))\n  }, _hoisted_4), _createElementVNode(\"span\", {\n    class: \"register\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $setup.goRegister && $setup.goRegister(...args))\n  }, \"Sign up\"), _createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _hoisted_7, _createElementVNode(\"div\", {\n    class: _normalizeClass([{\n      active: $setup.isShow == -1 && $setup.formData.account || $setup.showPwd == -3\n    }, \"account input\"]),\n    ref: \"accountPanel\"\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    autocomplete: \"off\",\n    ref: \"account\",\n    type: \"text\",\n    placeholder: \"Account\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.formData.account = $event)\n  }, null, 512), [[_vModelText, $setup.formData.account]]), _withDirectives(_createElementVNode(\"img\", _hoisted_8, null, 512), [[_vShow, $setup.isShow == 1 && $setup.formData.account !== '']]), _withDirectives(_createElementVNode(\"img\", _hoisted_9, null, 512), [[_vShow, $setup.isShow == -1 && $setup.formData.account !== '']]), _hoisted_10, _withDirectives(_createElementVNode(\"div\", _hoisted_11, \"account format error\", 512), [[_vShow, $setup.isShow == -1 && $setup.formData.account !== '']]), _withDirectives(_createElementVNode(\"div\", _hoisted_12, \"account should not be empty\", 512), [[_vShow, $setup.showPwd == -3 || $setup.isShow == -2]])], 2), _createElementVNode(\"div\", {\n    class: _normalizeClass([{\n      active: $setup.showPwd == -1 || $setup.showPwd == -3\n    }, \"pwd input\"])\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    autocomplete: \"off\",\n    type: \"password\",\n    placeholder: \"Password\",\n    ref: \"pwd\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.formData.password = $event)\n  }, null, 512), [[_vModelText, $setup.formData.password]]), _withDirectives(_createElementVNode(\"img\", _hoisted_13, null, 512), [[_vShow, $setup.showPwd == 1]]), _hoisted_14, _withDirectives(_createElementVNode(\"div\", _hoisted_15, \"password should not be empty\", 512), [[_vShow, $setup.showPwd == -3 || $setup.showPwd == -2]])], 2), _hoisted_16, _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = (...args) => $setup.Login && $setup.Login(...args))\n  }, \"Login\")])]);\n}","map":{"version":3,"names":["_imports_0","_imports_1","_imports_2","_imports_3","_imports_4","class","_createElementVNode","src","alt","_hoisted_2","_hoisted_3","id","_createElementBlock","_hoisted_1","onClick","_cache","args","$setup","goHomePage","goRegister","_hoisted_5","_hoisted_6","_hoisted_7","_normalizeClass","active","isShow","formData","account","showPwd","ref","autocomplete","type","placeholder","$event","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","password","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","Login"],"sources":["/Users/a1807292313/GIT/CIRCLE_IWCA/src/components/Login.vue"],"sourcesContent":["<template>\n     <div class=\"main_container\">\n          <div class=\"logo\" @click=\"goHomePage\">\n               <img src=\"../assets//logo/logo.png\" alt=\"logo\">\n               <span>Circle</span>\n          </div>\n          <span class=\"register\" @click=\"goRegister\">Sign up</span>\n          <div class=\"loginPanel\" id=\"panel\">\n               <span class=\"title\">Sign in</span>\n               <span class=\"tip\">Welcome To Circle and Come To Start Your Jouney</span>\n               <div :class=\"{ active: isShow == -1 && formData.account || showPwd == -3 }\" class=\"account input\"\n                    ref=\"accountPanel\">\n                    <input autocomplete=\"off\" ref=\"account\" type=\"text\" placeholder=\"Account\" v-model=\"formData.account\">\n                    <img class=\"pass litTip\" src=\"../assets/init-icon-pics/duigou1.png\" alt=\"pass\"\n                         v-show=\"isShow == 1 && formData.account !== ''\">\n                    <img class=\"error litTip\" src=\"../assets/init-icon-pics/cuowu.png\" alt=\"error\"\n                         v-show=\"isShow == -1 && formData.account !== ''\">\n                    <img src=\"../assets/init-icon-pics/account.png\" alt=\"account\">\n                    <div v-show=\"isShow == -1 && formData.account !== ''\" class=\"statu\">account format error</div>\n                    <div v-show=\"showPwd == -3 || isShow == -2\" class=\"statu\">account should not be empty</div>\n               </div>\n               <div :class=\"{ active: showPwd == -1 || showPwd == -3 }\" class=\"pwd input\">\n                    <!-- v-if=\"isShow\" -->\n                    <input autocomplete=\"off\" type=\"password\" placeholder=\"Password\" ref=\"pwd\" v-model=\"formData.password\">\n                    <img class=\"pass litTip\" src=\"../assets/init-icon-pics/duigou1.png\" alt=\"pass\" v-show=\"showPwd == 1\">\n                    <!-- <img src=\"../assets/init-icon-pics/cuowu.png\" alt=\"error\"> -->\n                    <img src=\"../assets/init-icon-pics/lock.png\" alt=\"pwd\">\n                    <div v-show=\"showPwd == -3 || showPwd == -2\" class=\"statu\">password should not be empty</div>\n               </div>\n               <div class=\"reAndFo\">\n                    <div class=\"remember\">\n                         <input type=\"checkbox\">\n                         <div class=\"rememberMe\">Remember me</div>\n                    </div>\n                    <div class=\"forgot\">Forget password?</div>\n               </div>\n               <button @click=\"Login\">Login</button>\n          </div>\n     </div>\n</template>\n\n<script>\nimport gsap from 'gsap';\nimport { useRouter } from 'vue-router';\nimport { getCurrentInstance, onMounted, reactive, ref } from 'vue';\nimport { debounce } from '../utils/index.js'\nexport default {\n     name: 'Login',\n     setup() {\n          let _this = getCurrentInstance()//获取this\n          let APIs = _this.appContext.config.globalProperties.$API//获取全局绑定的API\n          let tween = gsap.timeline()\n          //登录表单数据\n          let formData = reactive({\n               account: '',\n               password: ''\n          })\n          const ACTIVE = ' active'\n          let isShow = ref(0)\n          let showPwd = ref(0)\n          //路由相关函数\n          const router = useRouter();\n          const goHomePage = () => [\n               router.push('/')\n          ];\n          const goRegister = () => {\n               router.push('/register')\n          }\n          //对账号的正则判断\n          const accountReg = /^[a-zA-Z0-9_]{4,10}$/;\n\n          //事先启用debouce的回调\n          let debounceAccount = debounce(REGA, 800)\n          let debouncePwd = debounce(REGP, 800)\n\n          // console.log(debounceAccount, debouncePwd);\n          //account正则判断函数\n          function REGA() {\n               if (accountReg.test(formData.account) == false && formData.account !== '') {\n                    isShow.value = -1\n               }\n               else {\n                    isShow.value = 1\n               }\n          }\n          function REGP() {\n               if (formData.password) {\n                    showPwd.value = 1\n               } else {\n                    showPwd.value = 0\n               }\n          }\n          //监听鼠标事件的回调函数，如果键入回车（Enter），尝试进行登录操作\n          const keyboardDownBack = (event) => {\n               if(event.code == 'Enter') {\n                    Login()\n               }\n          }\n          //登录函数\n          const Login = async () => {\n               if (formData.account == '' && formData.password == '') {\n                    showPwd.value = -3\n                    return\n               }\n               if (formData.password == '') {\n                    showPwd.value = -2\n                    return\n               }\n               if (formData.account == '') {\n                    isShow.value = -2\n                    return\n               }\n               //登录处理函数\n               await APIs.login(JSON.stringify({ account: formData.account, pwd: formData.password })).then(ctx => {\n                    if (!ctx.response) {\n                         localStorage.token = String(ctx.token)\n                         localStorage.user_id_cache = ctx.uid\n                         localStorage.foption = 1\n                         localStorage.AccountStore = JSON.stringify({\n                              'user': {\n                                   id: ctx.uid,\n                                   uname: formData.account,\n                                   avatar: ctx.avatar,\n                                   nickname: ctx.nickname\n                              }\n                         })\n                         router.push('/channels')\n                         document.removeEventListener(\"keyup\", keyboardDownBack, true)\n                    }\n               })\n          }\n\n          \n          onMounted(() => {\n               tween.from('#panel', { duration: 0.5, scale: 0, opacity: 0, ease: 'power0' })\n               tween.to('#panel', { duration: 0.5, scale: 1, opacity: 1, ease: 'power0' })\n\n               _this.refs.account.oninput = (value) => {\n                    if (showPwd.value == -3) {\n                         showPwd.value = -2\n                    }\n                    if (formData.account.length < 4) isShow.value = 0\n                    debounceAccount()\n               }\n               _this.refs.pwd.oninput = (value) => {\n                    showPwd.value = 0\n                    debouncePwd()\n               }\n               //监听回车事件\n               document.addEventListener(\"keyup\", keyboardDownBack, true)\n          })\n          return {\n               goHomePage, goRegister, isShow, formData, showPwd, Login\n          }\n     }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.main_container {\n     width: 100vw;\n     height: 100vh;\n     background-color: rgb(61, 63, 97);\n     position: relative;\n\n     .logo {\n          position: absolute;\n          left: 5vw;\n          top: 20px;\n          display: flex;\n          height: 40px;\n\n          span {\n               font-family: Montserrat-BlackItalic;\n               font-size: 25px;\n               height: 40px;\n               line-height: 40px;\n               font-weight: 800;\n               color: #fff;\n          }\n     }\n\n     .register {\n          position: absolute;\n          right: 5vw;\n          top: 20px;\n          display: flex;\n          height: 30px;\n          color: #fff;\n          font-family: Montserrat-BlackItalic;\n          border-bottom: 1px solid #fff;\n          cursor: pointer;\n     }\n\n     .loginPanel {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          width: 500px;\n          height: 700px;\n          // border: 2px dashed blue;\n          transform: translate(-50%, -50%);\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n          row-gap: 40px;\n\n          .title {\n               color: #fff;\n               font-size: 40px;\n               font-family: Montserrat-BlackItalic;\n          }\n\n          .tip {\n               @media screen and (max-width: 1024px) {\n                    font-size: 16px;\n               }\n\n               @media screen and (max-width: 768px) {\n                    font-size: 13.5px;\n               }\n\n               color: #fff;\n               font-size: 18px;\n               font-family: var(--nomal-font_family);\n          }\n\n          .input {\n               width: 300px;\n               height: 50px;\n               background-color: rgb(69, 71, 103);\n               border-radius: 25px;\n               position: relative;\n               border: 1px solid rgba(154, 149, 149, 0.3);\n               backdrop-filter: blur(20px) !important;\n\n               .statu {\n                    position: absolute;\n                    bottom: -25px;\n                    left: 20px;\n                    font-family: var(--nomal-font_family);\n                    color: rgb(231, 77, 77)\n               }\n\n               .litTip {\n                    width: 20px;\n                    position: absolute;\n                    top: 5px;\n                    right: -20px;\n                    opacity: 1;\n               }\n\n               input {\n                    position: absolute;\n                    top: 50%;\n                    left: 0;\n                    // background-color: rgb(61, 63, 97);\n                    background-color: rgb(69, 71, 103);\n                    transform: translate(0, -50%);\n                    background-color: none;\n                    height: 80%;\n                    width: 80%;\n                    margin-left: 20px;\n                    outline: none;\n                    border: none;\n                    color: #fff;\n                    font-family: var(--nomal-font_family);\n\n                    &::placeholder {\n                         color: #fff;\n                         font-family: var(--nomal-font_family);\n                    }\n               }\n\n               img {\n                    opacity: .4;\n                    position: absolute;\n                    right: 0;\n                    top: 50%;\n                    margin-right: 20px;\n\n                    transform: translate(0, -50%);\n               }\n\n          }\n\n          .active {\n               border-color: red;\n          }\n\n          .reAndFo {\n               width: 300px;\n               display: flex;\n               justify-content: space-between;\n\n               .remember {\n                    display: flex;\n\n                    input {\n                         background-color: blue;\n                    }\n\n                    .rememberMe {\n                         margin-left: 5px;\n                         color: #fff;\n                         font-family: var(--nomal-font_family);\n                    }\n               }\n\n               .forgot {\n                    color: rgb(64, 201, 173);\n                    font-family: var(--nomal-font_family);\n               }\n          }\n\n          button {\n               width: 300px;\n               height: 45px;\n               border-radius: 20px;\n               border: none;\n               background-color: rgb(0, 242, 121);\n               color: #fff;\n               font-family: var(--nomal-font_family);\n               font-size: 18px;\n          }\n     }\n\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}